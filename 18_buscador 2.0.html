<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buscador</title>
</head>
<body>
    <!-- 
    
    NOS VA A APARECER UN COMBOBOX (DESPLEGABLE) CON EL CONJUNTO DE TEMÁTICAS QUE TENEMOS
    Y QUE NOS DEVUELVA LAS 

    -->

    


    <div id="insertar">

        INSERTA TUS PÁGINAS<br><br>
        TIPO<input type="text" id="tipo" placeholder="solo un tipo"><br><br>
        PAGINAS<input type="text" id="pagina" placeholder="separadas por comas"><br>
        <br>
        <button id="añadirPagina" onclick="añadirPagina();">AÑADIR PAGINA</button>

    </div>
    <hr>

    AHORA TE PUEDO DAR UNA LISTA DE LAS PÁGINAS SI ME DICES LA TEMÁTICA<br>
    ELIGE UNA TEMÁTICA DEL DESPLEGABLE
    

    <br><br>
    <select name="tematicas" id="selTematicas">
        <option value="deportes">Deportes</option>
        <option value="libros">Libros</option>
        <option value="juegos">Juegos</option>
        <option value="cocina">Cocina</option>
    </select>

    <button id="buscar" onclick="select();">BUSCAR</button>

    <table id="resultados"><!-- Aquí le ponemos los resultados -->


    </table>

    <script>

    let datos=[
        {"tematica":"deportes","direccion":"http://www.marca.es/"},
        {"tematica":"libros","direccion":"http://www.puntolibro.es/"},
        {"tematica":"deportes","direccion":"http://www.todofutbol.com/"},
        {"tematica":"libros","direccion":"http://www.fnac.es/"},
        {"tematica":"cocina","direccion":"http://www.fogones.es/"},
        {"tematica":"juegos","direccion":"http://www.game.es/"}
        ];

    let tematicas=new Set();
    let tematicasSelect=`
        <option value="deportes">Deportes</option><br>
        <option value="libros">Libros</option><br>
        <option value="juegos">Juegos</option><br>
        <option value="cocina">Cocina</option><br>
        `;

    for (i of datos){
        tematicas.add(i.tematica);
    };
    console.log(tematicas);

    

    function select(){ 
        let opcion = document.getElementById("selTematicas").value;
        let paginas="<tr><th>TEMÁTICA SELECCIONADA</th><th>PAGINAS</th></tr>";
                for (i of datos){
                    if(opcion==i.tematica){

                    paginas+=`<tr><td>${i.tematica}</td><td>${i.direccion}</td><th>`;
                    };
                };

        document.getElementById("resultados").innerHTML=paginas;
        };
    

    function añadirPagina(){
        let a={tematica:"", direccion:""};
        console.log(a);
        a.tematica=document.getElementById("tipo").value;
        a.direccion=document.getElementById("pagina").value;
        console.log(a);
        datos.push(a);
        console.log(tematicas);

        comprobarSelect(a.tematica);

    };

    function comprobarSelect(a){
        console.log(tematicas.has(a));
        if(tematicas.has(a)==false){
            tematicas.add(a);
            tematicasSelect+=`<option value="${a}">${a}</option><br>`;
        };
        console.log(tematicasSelect);
        document.getElementById("selTematicas").innerHTML=tematicasSelect;

    };



    </script>


</body>
</html>